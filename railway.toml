
[build]
builder = "NIXPACKS"
nixpacksVersion = "1.11.0"
buildCommand = "npm run build"

[deploy]
numReplicas = 1
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_ENV = "production"
VITE_PUBLIC_URL = "${RAILWAY_STATIC_URL}"

# Make sure environment variables from Railway Secrets are available
VITE_SUPABASE_URL = "${VITE_SUPABASE_URL}"
VITE_SUPABASE_ANON_KEY = "${VITE_SUPABASE_ANON_KEY}"
VITE_FLOWISE_URL = "${VITE_FLOWISE_URL}"
VITE_FLOWISE_API_KEY = "${VITE_FLOWISE_API_KEY}"

[service]
healthcheckPath = "/api/health"
healthcheckTimeout = 60

[[ports]]
port = "8080"
internal = false
protocol = "HTTP"

[[statics]]
source = "/dist"
destination = "/"
